<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:o="http://openfaces.org/"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:cst="http://kmware.com/ui"
	xmlns:sh="http://java.sun.com/jsf/composite/components">

<ui:composition template="/WEB-INF/templates/default.xhtml">
	<ui:define name="content">
		<h:form id="crudform" prependId="false" acceptcharset="UTF-8">
		<div id="content">
		
				<o:ajaxSettings onsuccess="console.log('success', arguments)"
					onsessionexpired="console.log('session expired',arguments)"
					onerror="console.log('error',arguments);app.sessionExpired(event.data)">
					<f:facet name="sessionExpiration">
						<o:defaultSessionExpiration>

						</o:defaultSessionExpiration>
					</f:facet>
				</o:ajaxSettings>

				<span>
					<o:inputTextFilter id="global" autoFilterDelay="100" for="table" expression="#{item.displayName} #{item.zipCode}" promptText="Global search" style="width:300px;"/>
					<span id="global-clear" class="km-clear-btn"><em class="km-icon-clear km-hidden"></em></span>
					<script>app.initClearButton('#global-clear');</script>
				</span>
				<br/><br/>
				<cst:dataTable id="table" bean="#{cityCRUD}">
					<ui:define name="columns">
						<o:column id="displayName" header="Name" styleClass="km-column"
							sortingExpression="#{item.displayName}">
							<o:commandLink value="#{item.displayName}"
								action="#{navigation.toView(item.id)}" />
						</o:column>
						<o:column id="zipCode" header="Zip-code" styleClass="km-column"
							sortingExpression="#{item.zipCode}">
							<h:outputText value="#{item.zipCode}" />
						</o:column>
					</ui:define>
				</cst:dataTable>

			
		</div>
		
			<div id="actions" class="km-actions">
				<h:commandButton action="#{navigation.toNew}" value="New record" immediate="true"
					styleClass="button" />
				<h:commandButton value="Export" styleClass="button" action="#{cityCRUD.exportToCSV}" immediate="true"/>
			</div>
		</h:form>

	</ui:define>
</ui:composition>
</html>