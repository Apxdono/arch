<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:cst="http://kmware.com/ui"
	xmlns:o="http://openfaces.org/">

<ui:composition template="/WEB-INF/templates/default.xhtml">
	<ui:define name="content">
		<h:form id="crudform" prependId="false" acceptcharset="UTF-8">

			<div id="content">
				<h:panelGrid columns="3">
					<h:outputLabel id="displayNamelabel" value="Name: *" for="displayNamevalue"/>
					<h:inputText id="displayNamevalue" value="#{taxCRUD.entity.displayName}" label="Name" maxlength="255">
                        <f:validateRequired disabled="#{param.skipBeanValidation}"/>
					</h:inputText>
					<h:message id="displayNamemsg" for="displayNamevalue"/>

					<h:outputLabel id="deletedlabel" value="Deleted: " for="deletedvalue"/>
					<h:selectBooleanCheckbox id="deletedvalue" value="#{taxCRUD.entity.deleted}" />
					<h:outputText value="" />

                    <h:outputLabel id="countrylabel" value="Country: *" for="countryvalue"/>
                    <h:selectOneMenu id="countryvalue" value="#{taxCRUD.entity.country}"  required="true" label="Country" converter="#{countryConverter}">
                           <f:selectItem itemValue="" itemLabel="Choose country"  rendered="#{empty taxCRUD.entity.country.displayName}"/>
                           <f:selectItems var="i"  value="#{taxCRUD.countries}" itemLabel="#{i.displayName}" itemValue="#{i}"/>
                           <!--<f:ajax event="change"   execute="@form" render="@form" immediate="true"/>-->
                           <o:ajax immediate="true" event="change" execute="@this" render="citylabel" >
                               <f:param name="skipBeanValidation" value="true" />
                            </o:ajax>
                    </h:selectOneMenu>
                    <h:message id="countrymsg" for="countryvalue"/>

                    <h:outputLabel id="citylabel" value="Country: *" for="cityvalue" rendered="#{not empty taxCRUD.entity.country.displayName}"/>
                    <h:selectOneMenu id="cityvalue" value="#{taxCRUD.entity.city}"  required="true" label="City" converter="#{cityConverter}" rendered="#{not empty taxCRUD.entity.country.displayName}">
                           <f:selectItem itemValue="" itemLabel="Choose city" />
                           <f:selectItems var="i"  value="#{taxCRUD.cities}" itemLabel="#{i.displayName}" itemValue="#{i}"/>
                    </h:selectOneMenu>
                    <h:message id="citymsg" for="cityvalue" rendered="#{not empty taxCRUD.entity.country.displayName}"/>


				</h:panelGrid>
			</div>
			<div id="actions" style="padding:0px 20px;" class="km-actions">
				<h:commandButton value="Save record" styleClass="button">
					<f:ajax event="click"  listener="#{taxCRUD.save}" execute="@all" render="crudform" />
				</h:commandButton>
				<h:commandButton action="#{navigation.toList}" value="Cancel" immediate="true" styleClass="button"/>
			</div>
		</h:form>
	</ui:define>
</ui:composition>
</html>